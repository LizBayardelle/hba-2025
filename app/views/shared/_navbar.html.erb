<!-- Top Navbar -->
<header class="bg-white shadow-sm" style="border-bottom: 1px solid #e5e7eb;">
  <div class="px-8 py-4 flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-bold display-font" style="color: #1D1D1F;">Dashboard</h2>
    </div>
    <div class="flex items-center gap-4">
      <!-- User Dropdown -->
      <div class="relative" x-data="{ open: false }">
        <% if user_signed_in? %>
          <!-- Logged In: User Avatar -->
          <button @click="open = !open" class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold hover:opacity-80 transition" style="background: linear-gradient(135deg, #45606b, #657b84);">
            <%= current_user.email.first.upcase %>
          </button>
        <% else %>
          <!-- Logged Out: Login Icon -->
          <button @click="open = !open" class="w-10 h-10 rounded-full flex items-center justify-center hover:bg-gray-100 transition" style="color: #45606b;">
            <i class="fa-solid fa-arrow-right-to-bracket text-xl"></i>
          </button>
        <% end %>

        <!-- Dropdown Menu -->
        <div x-show="open" @click.away="open = false" x-transition class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50">
          <% if user_signed_in? %>
            <!-- Logged In Menu -->
            <%= link_to edit_user_registration_path, class: "flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition" do %>
              <i class="fa-solid fa-user" style="color: #45606b;"></i>
              <span class="text-sm font-medium" style="color: #1D1D1F;">My Account</span>
            <% end %>
            <%= button_to destroy_user_session_path, method: :delete, class: "w-full flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition text-left" do %>
              <i class="fa-solid fa-arrow-right-from-bracket" style="color: #45606b;"></i>
              <span class="text-sm font-medium" style="color: #1D1D1F;">Sign Out</span>
            <% end %>
          <% else %>
            <!-- Logged Out Menu -->
            <%= link_to new_user_session_path, class: "flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition" do %>
              <i class="fa-solid fa-arrow-right-to-bracket" style="color: #45606b;"></i>
              <span class="text-sm font-medium" style="color: #1D1D1F;">Sign In</span>
            <% end %>
            <%= link_to new_user_registration_path, class: "flex items-center gap-3 px-4 py-2 hover:bg-gray-50 transition" do %>
              <i class="fa-solid fa-user-plus" style="color: #45606b;"></i>
              <span class="text-sm font-medium" style="color: #1D1D1F;">Create Account</span>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</header>
