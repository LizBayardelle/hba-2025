<div class="flex h-screen relative" style="background: #F5F5F7;">
  <%= render 'shared/sidebar' %>

  <!-- Mobile overlay -->
  <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-30 md:hidden hidden"></div>

  <!-- Menu flag button -->
  <button id="menu-button" class="fixed left-0 z-20 md:hidden rounded-r-lg shadow-lg flex items-center justify-center py-1.5 px-3 transition-all"
    style="top: 200px; background: linear-gradient(135deg, #2C2C2E, #1D1D1F); writing-mode: vertical-rl;">
    <span class="text-white font-bold text-sm tracking-wider">MENU</span>
  </button>

<script>
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('sidebar-overlay');
  const menuButton = document.getElementById('menu-button');
  const closeButton = document.getElementById('sidebar-close');

  function openSidebar() {
    sidebar.classList.remove('-translate-x-full');
    sidebar.classList.add('translate-x-0');
    overlay.classList.remove('hidden');
    menuButton.classList.add('hidden');
  }

  function closeSidebar() {
    sidebar.classList.add('-translate-x-full');
    sidebar.classList.remove('translate-x-0');
    overlay.classList.add('hidden');
    menuButton.classList.remove('hidden');
  }

  menuButton.addEventListener('click', openSidebar);
  closeButton.addEventListener('click', closeSidebar);
  overlay.addEventListener('click', closeSidebar);
</script>

  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <%= render 'shared/navbar' %>

    <!-- Scrollable Content -->
    <main class="flex-1 overflow-y-auto" style="background: #F5F5F7;">
      <!-- Header Section -->
      <div style="background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);">
        <div class="p-8">
          <div class="flex items-start justify-between mb-2">
            <div class="flex-1">
              <h1 class="text-5xl font-display mb-2" style="color: #1D1D1F;">
                Account
              </h1>
            </div>
          </div>
        </div>
      </div>

      <!-- Content Area -->
      <div class="pl-8 pb-8">
        <div>
          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
            <%= render "devise/shared/error_messages", resource: resource %>

            <!-- Email Section -->
            <div class="mb-6">
              <div class="-ml-8 pr-8 pl-8 py-4 mb-4 flex items-center gap-3"
                style="background: linear-gradient(to bottom, color-mix(in srgb, #8E8E93 85%, white) 0%, #8E8E93 100%); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);">
                <i class="fa-solid fa-envelope text-white text-lg"></i>
                <h3 class="text-2xl flex-1 text-white font-display" style="font-weight: 500;">
                  Email Address
                </h3>
              </div>

              <div class="rounded-xl p-6 mr-8" style="background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 0.5px rgba(199, 199, 204, 0.2);">
                <div class="mb-4">
                  <%= f.label :email, class: "block text-sm font-semibold mb-2", style: "color: #1D1D1F; font-family: 'Inter', sans-serif;" %>
                  <%= f.email_field :email, autofocus: true, autocomplete: "email",
                      class: "w-full px-4 py-3 rounded-lg focus:outline-none transition",
                      style: "border: 0.5px solid rgba(199, 199, 204, 0.3); font-family: 'Inter', sans-serif; font-weight: 300;",
                      placeholder: "you@example.com" %>
                </div>

                <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                  <div class="p-3 rounded-lg text-sm" style="background-color: #FEF3C7; color: #92400E; font-family: 'Inter', sans-serif; font-weight: 400;">
                    <i class="fa-solid fa-clock mr-2"></i>Currently waiting confirmation for: <%= resource.unconfirmed_email %>
                  </div>
                <% end %>
              </div>
            </div>

            <!-- Timezone Section -->
            <div class="mb-6">
              <div class="-ml-8 pr-8 pl-8 py-4 mb-4 flex items-center gap-3"
                style="background: linear-gradient(to bottom, color-mix(in srgb, #8E8E93 85%, white) 0%, #8E8E93 100%); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);">
                <i class="fa-solid fa-globe text-white text-lg"></i>
                <h3 class="text-2xl flex-1 text-white font-display" style="font-weight: 500;">
                  Time Zone
                </h3>
              </div>

              <div class="rounded-xl p-6 mr-8" style="background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 0.5px rgba(199, 199, 204, 0.2);">
                <div class="mb-2">
                  <%= f.label :timezone, class: "block text-sm font-semibold mb-2", style: "color: #1D1D1F; font-family: 'Inter', sans-serif;" %>
                  <%= f.select :timezone,
                      ActiveSupport::TimeZone.us_zones.map { |tz| [tz.to_s, tz.name] },
                      {},
                      class: "w-full px-4 py-3 rounded-lg focus:outline-none transition",
                      style: "border: 0.5px solid rgba(199, 199, 204, 0.3); font-family: 'Inter', sans-serif; font-weight: 300;" %>
                </div>
              </div>
            </div>

            <!-- Password Section -->
            <div class="mb-6">
              <div class="-ml-8 pr-8 pl-8 py-4 mb-4 flex items-center gap-3"
                style="background: linear-gradient(to bottom, color-mix(in srgb, #8E8E93 85%, white) 0%, #8E8E93 100%); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);">
                <i class="fa-solid fa-key text-white text-lg"></i>
                <h3 class="text-2xl flex-1 text-white font-display" style="font-weight: 500;">
                  Change Password
                </h3>
              </div>

              <div class="rounded-xl p-6 mr-8" style="background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 0.5px rgba(199, 199, 204, 0.2);">
                <p class="text-xs mb-6" style="color: #8E8E93; font-family: 'Inter', sans-serif; font-weight: 400;">
                  Leave these fields blank if you don't want to change your password
                </p>

                <!-- New Password Field -->
                <div class="mb-4">
                  <div class="flex items-center justify-between mb-2">
                    <%= f.label :password, "New Password", class: "block text-sm font-semibold", style: "color: #1D1D1F; font-family: 'Inter', sans-serif;" %>
                    <% if @minimum_password_length %>
                      <span class="text-xs" style="color: #8E8E93; font-family: 'Inter', sans-serif;">
                        (<%= @minimum_password_length %> characters minimum)
                      </span>
                    <% end %>
                  </div>
                  <%= f.password_field :password, autocomplete: "new-password",
                      class: "w-full px-4 py-3 rounded-lg focus:outline-none transition",
                      style: "border: 0.5px solid rgba(199, 199, 204, 0.3); font-family: 'Inter', sans-serif; font-weight: 300;",
                      placeholder: "Enter new password" %>
                </div>

                <!-- Password Confirmation Field -->
                <div>
                  <%= f.label :password_confirmation, "Confirm New Password", class: "block text-sm font-semibold mb-2", style: "color: #1D1D1F; font-family: 'Inter', sans-serif;" %>
                  <%= f.password_field :password_confirmation, autocomplete: "new-password",
                      class: "w-full px-4 py-3 rounded-lg focus:outline-none transition",
                      style: "border: 0.5px solid rgba(199, 199, 204, 0.3); font-family: 'Inter', sans-serif; font-weight: 300;",
                      placeholder: "Confirm new password" %>
                </div>
              </div>
            </div>

            <!-- Current Password Section -->
            <div class="mb-6">
              <div class="-ml-8 pr-8 pl-8 py-4 mb-4 flex items-center gap-3"
                style="background: linear-gradient(to bottom, color-mix(in srgb, #8E8E93 85%, white) 0%, #8E8E93 100%); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);">
                <i class="fa-solid fa-lock text-white text-lg"></i>
                <h3 class="text-2xl flex-1 text-white font-display" style="font-weight: 500;">
                  Confirm Changes
                </h3>
              </div>

              <div class="rounded-xl p-6 mr-8" style="background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 0.5px rgba(199, 199, 204, 0.2);">
                <%= f.label :current_password, class: "block text-sm font-semibold mb-2", style: "color: #1D1D1F; font-family: 'Inter', sans-serif;" %>
                <p class="text-xs mb-3" style="color: #8E8E93; font-family: 'Inter', sans-serif; font-weight: 400;">
                  We need your current password to confirm any changes
                </p>
                <%= f.password_field :current_password, autocomplete: "current-password",
                    class: "w-full px-4 py-3 rounded-lg focus:outline-none transition",
                    style: "border: 0.5px solid rgba(199, 199, 204, 0.3); font-family: 'Inter', sans-serif; font-weight: 300;",
                    placeholder: "Enter current password" %>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="mb-8 mr-8">
              <%= f.submit "Update Account",
                  class: "w-full py-3 px-6 rounded-lg text-white font-semibold shadow-lg hover:shadow-xl transition transform hover:scale-[1.02] cursor-pointer",
                  style: "background: linear-gradient(135deg, #2C2C2E, #1D1D1F); font-family: 'Inter', sans-serif; font-weight: 600;" %>
            </div>
          <% end %>

          <!-- Danger Zone -->
          <div class="mb-6">
            <div class="-ml-8 pr-8 pl-8 py-4 mb-4 flex items-center gap-3"
              style="background: linear-gradient(to bottom, color-mix(in srgb, #8E8E93 85%, white) 0%, #8E8E93 100%); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);">
              <i class="fa-solid fa-triangle-exclamation text-white text-lg"></i>
              <h3 class="text-2xl flex-1 text-white font-display" style="font-weight: 500;">
                Danger Zone
              </h3>
            </div>

            <div class="rounded-xl p-6 mr-8" style="background: #FFFFFF; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 0.5px rgba(199, 199, 204, 0.2);">
              <p class="text-sm mb-4" style="color: #8E8E93; font-family: 'Inter', sans-serif; font-weight: 400;">
                Once you delete your account, there is no going back. Please be certain.
              </p>
              <%= button_to "Delete My Account", registration_path(resource_name),
                  data: { confirm: "Are you sure? This action cannot be undone." },
                  method: :delete,
                  class: "py-2 px-6 rounded-lg font-semibold border-2 transition hover:bg-red-50",
                  style: "color: #DC2626; border-color: #DC2626; font-family: 'Inter', sans-serif;" %>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
